# synthetic-human-core-starter

## Описание

Этот проект реализует spring boot starter для управления очередью команд и сбора метрик занятости, а также содержит модуль аудита с поддержкой логирования событий через Kafka.

Автор: Давлетов Тимур

## Основные модули

- **Модуль команд**  
  Управление очередью команд с ограничением по размеру, обработка критичных и обычных команд с приоритетами. Все действия в очереди сопровождаются аудитом.

- **Модуль мониторинга**  
  Сбор метрик по размеру очереди и количеству активных задач (Micrometer Gauge), REST API для получения текущего статуса и метрик (Prometheus-совместимый формат).

- **Модуль аудита**  
  Аудит событий с помощью аспектов Spring AOP, поддержка вывода в консоль и интеграция с Kafka для логирования событий.

- **Модуль обработки ошибок** \
  Единый формат http-response с кодом и значением ошибки, а также timestamp-меткой времени и даты ошибки.

## Пример использования

1. **Запуск приложения**  
   ```bash
   ./gradlew bootRun
   ```

2. **Метрики и статус**  
   - `GET /api/v1/monitoring/status` — статус системы (активные задачи, размер очереди, текущее время)
   - `GET /api/v1/monitoring/metrics` — Prometheus-метрики очереди

## Технологии

- Java 17+
- ThreadPoolExecutor
- Spring Boot 3
- Actuator, Micrometer (Prometheus + Grafana)
- Kafka
- AspectJ (Spring AOP)

## Структура

- `core/modules/command_module` — обработка команд и управление очередью
- `core/modules/monitoring_module` — метрики и мониторинг
- `core/modules/audit_module` — аудит действий
- `core/modules/error_module` — обработка ошибок

- `bishop-prototype` — прототип проекта, построенный на базе стартера.
